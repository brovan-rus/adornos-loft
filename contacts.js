(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._chatButton=document.querySelector(".chat__open-chat"),this._chatLinks=document.querySelectorAll(".chat__link"),this._handleChatOpen=this._handleChatOpen.bind(this)}var n,r;return n=t,(r=[{key:"_handleChatOpen",value:function(){this._chatButton.classList.toggle("chat__opened"),Array.from(this._chatLinks).forEach((function(e){e.classList.toggle("chat__link_hidden")}))}},{key:"enableChat",value:function(){this._chatButton.classList.remove("chat__link_hidden"),this._chatButton.addEventListener("click",this._handleChatOpen)}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hamburger=document.querySelector(".hamburger"),this._mobileMenu=document.querySelector(".nav_device_mobile"),this._handleHamburgerMenu=this._handleHamburgerMenu.bind(this)}var t,r;return t=e,(r=[{key:"_handleHamburgerMenu",value:function(){this._hamburger.classList.toggle("hamburger_active"),this._mobileMenu.classList.toggle("nav_device_mobile_active")}},{key:"enableHamburgerMenu",value:function(){this._hamburger.addEventListener("click",this._handleHamburgerMenu)}}])&&n(t.prototype,r),e}(),a={send:function(e){return new Promise((function(t,n){e.nocache=Math.floor(1e6*Math.random()+1),e.Action="Send";var r=JSON.stringify(e);a.ajaxPost("https://smtpjs.com/v3/smtpjs.aspx?",r,(function(e){t(e)}))}))},ajaxPost:function(e,t,n){var r=a.createCORSRequest("POST",e);r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onload=function(){var e=r.responseText;null!=n&&n(e)},r.send(t)},ajax:function(e,t){var n=a.createCORSRequest("GET",e);n.onload=function(){var e=n.responseText;null!=t&&t(e)},n.send()},createCORSRequest:function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._values=t,this._form=n,this._formInputElements=this._form.querySelectorAll(this._values.inputSelector)}var t,n;return t=e,(n=[{key:"_isInvalid",value:function(e){return!e.validity.valid}},{key:"_showInputError",value:function(e,t){var n=this._form.querySelector(".".concat(e.id,"-error"));n.classList.add(this._values.errorClass),n.textContent=t,e.classList.add(this._values.inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));t.classList.remove(this._values.errorClass),t.textContent="",e.classList.remove(this._values.inputErrorClass)}},{key:"_toggleSubmitButton",value:function(){var e=this,t=this._form.querySelector(this._values.submitButtonSelector);Array.from(this._form.elements).some((function(t){return e._isInvalid(t)}))?(t.classList.add(this._values.inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._values.inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var e=this;Array.from(this._formInputElements).forEach((function(t){t.addEventListener("input",(function(){e._toggleSubmitButton(),e._isInvalid(t)?e._showInputError(t,t.validationMessage):e._hideInputError(t)}))}))}},{key:"clearValidation",value:function(){var e=this;this._toggleSubmitButton(),Array.from(this._formInputElements).forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,n),e}(),s=window.matchMedia("only screen and (min-width: 649px)"),u=new t;s.matches||u.enableChat();var l=new r;s.matches||l.enableHamburgerMenu();var c=document.querySelector("#user-name-input"),h=document.querySelector("#phone-number-input"),m=document.querySelector(".form__submit-button"),f=document.querySelector(".form");f.addEventListener("submit",(function(e){e.preventDefault(),m.textContent="Отправка",a.send({Host:"smtp.elasticemail.com",Username:"brovan@gmail.com",Password:"815DBF0EB5A96D942173188498531472E32C",To:"brovan@yandex.ru",From:"brovan@gmail.com",Subject:"Заявка на обратный звонок от пользователя ".concat(c.value),Body:"Отправлена заявка на обратный звонок от пользователя ".concat(c.value," Телефонный номер - ").concat(h.value)}).then((function(e){m.textContent="Мы свяжемся с вами в ближайшее время!"})).catch((function(e){m.textContent="Произошла ошибка при отправке формы..."})).finally((function(){e.target.reset(),setTimeout((function(){m.textContent="Обратный звонок",d.clearValidation()}),2e3)}))}));var d=new i({formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},f);d.clearValidation(),d.enableValidation()})();